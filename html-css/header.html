<!DOCTYPE html>

<header style="margin-bottom: 20px;">
    <img onclick="window.location.href='about-us.html'" id="logo"
        style="cursor:pointer; width: 25%;margin-bottom: -3%; position: relative; left:50%; transform: translate(-50%, -10%); "
        src="../images/logo2.png">
</header>

<body>
    <div class="search-bar" style="position:relative; right:35px">
        <input type="text" placeholder="Search...">
        <button type="submit"></button>
    </div>

    <div>
        <button id="loginBtn" style="position:relative; transform: translate(35px); padding: 15px;"></button>
        <button id="cartBtn" hidden style="position:relative; transform: translate(35px, 7px);"
            onclick="window.location.href='cart.html'">
            <img src="/images/instagram.png" class="vcn" style="width: 27px;"><br>
        </button>


    </div>
    <br>
    <div style="position: absolute; left: 50%; transform: translate(-50%);;">
        <nav>
            <ul id="firstCat" style=" margin-bottom: 10px;">
                <li> <a href="men.html">Men's Wear</a></li>
                <li> <a href="ladies.html">Ladies's Wear</a></li>
                <li> <a href="children.html">Kids's Wear</a></li>
                <li> <a href="accessories.html">Accessories</a></li>
                <li> <a href="Clothing.html">Clothing</a></li>
            </ul>
        </nav>
    </div>
    <div>
        <br>
    </div>
    <hr style="width:60%">
    <br>

    <nav>
        <ul id="navigator">
            <li><button onclick="window.location.href='index.html'"><img src="/images/twitter.png"> <br>Home</button>
            <li><button onclick="window.location.href='about-us.html'"><img src="/images/twitter.png"> <br>About
                    Us</button>
            <li><button onclick="window.location.href='contact.html'"><img src="/images/twitter.png"> <br>Contact
                    Us</button>
            <li><button onclick="window.location.href='table.html'"><img src="/images/twitter.png"> <br>Sizing</button>
            <li><button onclick="window.location.href='returns.html'"><img src="/images/twitter.png">
                    <br>Returns</button>
            <li><button onclick="window.location.href='Form.html'"><img src="/images/twitter.png"> <br>Hiring</button>
            <li><button onclick="window.location.href='privacy.html'"><img src="/images/twitter.png">
                    <br>Privacy</button>

        </ul>
    </nav>



    <br>
    <hr style="width:60% ;">


    <div id="myModal" class="modal">

        <div class="modal-content">
            <span class="close" onclick="closer()">&times;</span>
            <h2>Log in to Your Account</h2>
            <form id="FormId">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <div class="form-group">
                    <button type="submit" value="Submit">Login</button> <!-- submit button -->
                </div>
            </form>
        </div>

    </div>


    <div id="userModal" class="modal">

        <div class="modal-content">
            <span class="close" onclick="closer()">&times;</span>
            <h2 id="usernameInModal"></h2>
            <!-- rerender the line above -->
            <button id="logoutBtn" onclick="logout()">Log Out</button>
            <button id="userdetails">User Profile</button>
        </div>

    </div>
</body>

</html>

<script>
    var modal = document.getElementById("myModal");
    var loginBtn = document.getElementById("loginBtn");
    var cartBtn = document.getElementById("cartBtn");
    var userNameInLocalStorage = localStorage.getItem("username");
    var usermodal = document.getElementById("userModal");
    let itemsInCart = 0;

    function logout() {
        localStorage.removeItem("username");
        cartBtn.hidden = true;
        location.reload();
    }

    if (userNameInLocalStorage) {
        loginBtn.innerText = userNameInLocalStorage;
        cartBtn.hidden = false;  // Show the cart button when user is logged in
    } else {
        loginBtn.innerText = 'Login | Register';
        cartBtn.hidden = true;  // Hide the cart button when user is not logged in
    }

    loginBtn.onclick = function () {
        if (userNameInLocalStorage) {
            usermodal.style.display = "block";
        } else {
            modal.style.display = "block";
        }
    }

    function closer() {
        if (userNameInLocalStorage) {
            userModal.style.display = "none";
        } else {
            modal.style.display = "none";
        }
    }

    window.onclick = function (event) {
        if (event.target == modal || event.target == userModal) {
            modal.style.display = "none";
            userModal.style.display = "none";
        }
    }

    var form = document.getElementById('FormId')

    form.addEventListener('submit', function (e) {
        e.preventDefault()

        if (!form.username.value || !form.password.value) {
            return
        }
        window.localStorage.setItem('username', form.username.value);
        cartBtn.hidden = false;  // Show the cart button after login
        location.reload();
    });

    function topPadder(container, paddingVal, index) {
        let navigator = document.getElementById(container);

        for (let i of navigator.children) {
            let v = (i.innerText.length);
            let pad = paddingVal - (v / 2);
            i.children[0].style.width = paddingVal + "px";
        }
    }

    topPadder("navigator", window.innerWidth / 10, 1);

    for (let i of document.getElementById("firstCat").children) {
        let v = i.children[0].firstChild.data.length;
        let pad = (30 - v) / 2;
        i.style.padding = "0px " + pad + "px 0px " + pad + "px";
    }

</script>